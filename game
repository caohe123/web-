<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8" />
    <title>英语单词拼写拖拽游戏</title>
    <style>
        body { font-family: Arial, sans-serif; background:#f5f7fb; margin:0; padding:20px; }
        h1 { text-align:center; }
        .game { max-width:900px; margin:0 auto; background:#fff; padding:20px; border-radius:12px; box-shadow:0 10px 20px rgba(0,0,0,.1);}
        .top { display:flex; justify-content:space-between; align-items:center; flex-wrap:wrap; }
        .score { font-size:18px; }
        .timer { font-weight:bold; color:#e74c3c; }
        .definition { margin:15px 0; font-size:18px; text-align:center; }
        .word-area, .letters { display:flex; justify-content:center; margin:20px 0; }
        .slot, .letter { width:50px; height:50px; margin:5px; border-radius:8px; display:flex; align-items:center; justify-content:center; font-size:24px; }
        .slot { border:2px dashed #ccc; }
        .letter { background:#3498db; color:#fff; cursor:grab; }
        .correct { background:#2ecc71 !important; }
        .wrong { background:#e74c3c !important; animation:shake .3s; }
        @keyframes shake { 0%{transform:translateX(0)} 25%{transform:translateX(-5px)} 50%{transform:translateX(5px)} 75%{transform:translateX(-5px)} 100%{transform:translateX(0)} }
        .controls { text-align:center; }
        button, select { padding:10px 16px; margin:5px; border:none; border-radius:6px; cursor:pointer; }
        select { border:1px solid #ccc; }
    </style>
</head>
<body>
<h1>英语单词拼写拖拽游戏</h1>
<div class="game">
    <div class="top">
        <div class="score">分数：<span id="score">0</span> | 连胜：<span id="streak">0</span></div>
        <div>
            难度：
            <select id="difficulty" onchange="changeDifficulty()">
                <option value="easy">简单（小学）</option>
                <option value="mid">中等（中学）</option>
                <option value="hard">困难（六级）</option>
            </select>
        </div>
        <div class="timer">剩余时间：<span id="time">30</span>s</div>
    </div>

    <div class="definition" id="definition"></div>

    <div class="word-area" id="slots"></div>
    <div class="letters" id="letters"></div>

    <div class="controls">
        <button onclick="check()">提交</button>
        <button onclick="nextWord()">跳过</button>
    </div>
</div>

<script>
    const wordBank = {
        easy: [
            { word: 'cat', meaning: '猫' },
            { word: 'dog', meaning: '狗' },
            { word: 'sun', meaning: '太阳' },
            { word: 'pen', meaning: '钢笔' },
            { word: 'book', meaning: '书' },
            { word: 'milk', meaning: '牛奶' },
            { word: 'fish', meaning: '鱼' },
            { word: 'tree', meaning: '树' },
            { word: 'bird', meaning: '鸟' },
            { word: 'apple', meaning: '苹果' }
        ],
        mid: [
            { word: 'teacher', meaning: '老师' },
            { word: 'library', meaning: '图书馆' },
            { word: 'hospital', meaning: '医院' },
            { word: 'computer', meaning: '电脑' },
            { word: 'language', meaning: '语言' },
            { word: 'history', meaning: '历史' },
            { word: 'science', meaning: '科学' },
            { word: 'exercise', meaning: '锻炼' },
            { word: 'important', meaning: '重要的' },
            { word: 'problem', meaning: '问题' }
        ],
        hard: [
            { word: 'abandon', meaning: '放弃' },
            { word: 'significant', meaning: '重要的' },
            { word: 'consequence', meaning: '结果，后果' },
            { word: 'phenomenon', meaning: '现象' },
            { word: 'perspective', meaning: '观点' },
            { word: 'inevitable', meaning: '不可避免的' },
            { word: 'hypothesis', meaning: '假设' },
            { word: 'fundamental', meaning: '基础的' },
            { word: 'distinguish', meaning: '区分' },
            { word: 'substantial', meaning: '大量的；实质性的' }
        ]
    };

    let difficulty = 'easy';
    let currentWord = '';
    let currentMeaning = '';
    let score = 0;
    let streak = 0;
    let time = 30;
    let timer;

    function shuffle(arr){ return arr.sort(()=>Math.random()-0.5); }

    function startTimer(){
        clearInterval(timer);
        time = 30;
        document.getElementById('time').innerText = time;
        timer = setInterval(()=>{
            time--;
            document.getElementById('time').innerText = time;
            if(time<=0){ streak=0; document.getElementById('streak').innerText=0; nextWord(); }
        },1000);
    }

    function changeDifficulty(){
        difficulty = document.getElementById('difficulty').value;
        score = 0; streak = 0;
        document.getElementById('score').innerText = score;
        document.getElementById('streak').innerText = streak;
        nextWord();
    }

    function nextWord(){
        startTimer();
        const list = wordBank[difficulty];
        const item = list[Math.floor(Math.random()*list.length)];
        currentWord = item.word;
        currentMeaning = item.meaning;

        document.getElementById('definition').innerText = '释义：' + currentMeaning;

        const slots = document.getElementById('slots');
        const letters = document.getElementById('letters');
        slots.innerHTML = '';
        letters.innerHTML = '';

        [...currentWord].forEach(()=>{
            const s = document.createElement('div');
            s.className='slot';
            s.ondragover=e=>e.preventDefault();
            s.ondrop=e=>{ const id=e.dataTransfer.getData('id'); s.innerText=document.getElementById(id).innerText; };
            slots.appendChild(s);
        });

        shuffle([...currentWord]).forEach((l,i)=>{
            const d = document.createElement('div');
            d.className='letter'; d.id='l'+i; d.innerText=l; d.draggable=true;
            d.ondragstart=e=>e.dataTransfer.setData('id',d.id);
            letters.appendChild(d);
        });
    }

    function check(){
        const result = [...document.querySelectorAll('.slot')].map(s=>s.innerText).join('');
        document.querySelectorAll('.slot').forEach(s=>s.classList.remove('wrong'));

        if(result===currentWord){
            streak++;
            const add = Math.floor(10 * (streak>=3?1.2:1));
            score += add;
            document.getElementById('score').innerText=score;
            document.getElementById('streak').innerText=streak;
            document.querySelectorAll('.slot').forEach(s=>s.classList.add('correct'));
            setTimeout(nextWord,800);
        }else{
            streak=0;
            document.getElementById('streak').innerText=0;
            [...document.querySelectorAll('.slot')].forEach((s,i)=>{
                if(s.innerText!==currentWord[i]) s.classList.add('wrong');
            });
        }
    }

    nextWord();
</script>
</body>
</html>
