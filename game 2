<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>Mini Mario ‚Äì Word Adventure</title>
    <style>
        body {
            margin: 0;
            background: #1e1e1e;
            color: #fff;
            font-family: Arial, sans-serif;
            overflow: hidden;
        }
        #menu {
            position: absolute;
            inset: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 16px;
        }
        .levels {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 10px;
        }
        button {
            padding: 8px 14px;
            font-size: 16px;
            border-radius: 6px;
            border: none;
            cursor: pointer;
        }
        canvas {
            display: none;
            background: #87ceeb;
        }
    </style>
</head>
<body>

<div id="menu">
    <h1>üçÑ Mini Mario ‚Äì Word Adventure</h1>
    <p>Select a level</p>
    <div class="levels" id="levels"></div>
</div>

<canvas id="game" width="800" height="400"></canvas>

<script>
    const canvas = document.getElementById('game');
    const ctx = canvas.getContext('2d');
    const menu = document.getElementById('menu');
    const levelsDiv = document.getElementById('levels');

    // ===== LEVEL CONFIG =====
    const LEVELS = [
        { word: 'CAT',  platforms:[{x:0,y:350,w:800,h:50},{x:250,y:300,w:120,h:20}] },
        { word: 'BOOK', platforms:[{x:0,y:350,w:800,h:50},{x:180,y:300,w:100,h:20},{x:360,y:260,w:100,h:20}] },
        { word: 'APPLE',platforms:[{x:0,y:350,w:800,h:50},{x:200,y:300,w:100,h:20},{x:400,y:260,w:100,h:20}] },
        { word: 'HOUSE',platforms:[{x:0,y:350,w:800,h:50},{x:150,y:280,w:120,h:20},{x:350,y:240,w:120,h:20}] },
        { word: 'MARKET',platforms:[{x:0,y:350,w:800,h:50},{x:120,y:300,w:90,h:20},{x:260,y:260,w:90,h:20},{x:420,y:220,w:90,h:20}] },
        { word: 'ORANGE',platforms:[{x:0,y:350,w:800,h:50},{x:300,y:300,w:140,h:20}] },
        { word: 'ANIMAL',platforms:[{x:0,y:350,w:800,h:50},{x:200,y:260,w:120,h:20},{x:500,y:260,w:120,h:20}] },
        { word: 'WEATHER',platforms:[{x:0,y:350,w:800,h:50},{x:180,y:300,w:100,h:20},{x:400,y:260,w:100,h:20},{x:600,y:220,w:100,h:20}] },
        { word: 'COMPUTER',platforms:[{x:0,y:350,w:800,h:50},{x:350,y:280,w:120,h:20}] },
        { word: 'EDUCATION',platforms:[{x:0,y:350,w:800,h:50},{x:150,y:300,w:100,h:20},{x:300,y:260,w:100,h:20},{x:450,y:220,w:100,h:20},{x:600,y:180,w:100,h:20}] }
    ];

    LEVELS.forEach((_, i) => {
        const btn = document.createElement('button');
        btn.innerText = 'Level ' + (i + 1);
        btn.onclick = () => startLevel(i);
        levelsDiv.appendChild(btn);
    });

    // ===== GAME STATE =====
    let currentLevel = null;
    let platforms = [];
    let letters = [];
    let slots = [];
    let running = false;

    const player = {
        x: 50, y: 280, w: 32, h: 48,
        vx: 0, vy: 0,
        speed: 1.2,
        jump: -6.5,
        onGround: false,
        dir: 1
    };

    const keys = {};
    document.addEventListener('keydown', e => keys[e.key.toLowerCase()] = true);
    document.addEventListener('keyup', e => keys[e.key.toLowerCase()] = false);

    function startLevel(i) {
        currentLevel = LEVELS[i];
        platforms = currentLevel.platforms;

        // reset player
        player.x = 50;
        player.y = 280;
        player.vx = player.vy = 0;

        // word system
        const chars = currentLevel.word.split('');
        const shuffled = [...chars].sort(() => Math.random() - 0.5);
        letters = shuffled.map((c, idx) => ({
            char: c,
            x: 180 + idx * 100,
            y: 200 - idx * 20,
            collected: false
        }));
        slots = new Array(chars.length).fill(null);

        menu.style.display = 'none';
        canvas.style.display = 'block';
        running = true;
    }

    function endLevel() {
        running = false;
        alert('‚úÖ Word completed!');
        canvas.style.display = 'none';
        menu.style.display = 'flex';
    }

    function update() {
        if (!running) return;

        if (keys['a']) { player.vx = -player.speed; player.dir = -1; }
        else if (keys['d']) { player.vx = player.speed; player.dir = 1; }
        else player.vx *= 0.6;

        if (keys['w'] && player.onGround) {
            player.vy = player.jump;
            player.onGround = false;
        }

        player.vy += 0.35;
        player.x += player.vx;
        player.y += player.vy;

        player.onGround = false;
        platforms.forEach(p => {
            if (
                player.x < p.x + p.w &&
                player.x + player.w > p.x &&
                player.y + player.h <= p.y + 8 &&
                player.y + player.h + player.vy >= p.y
            ) {
                player.y = p.y - player.h;
                player.vy = 0;
                player.onGround = true;
            }
        });

        letters.forEach(l => {
            if (!l.collected &&
                player.x < l.x + 20 &&
                player.x + player.w > l.x &&
                player.y < l.y + 20 &&
                player.y + player.h > l.y
            ) {
                l.collected = true;
                const idx = slots.indexOf(null);
                if (idx !== -1) slots[idx] = l.char;
            }
        });

        if (slots.join('') === currentLevel.word) endLevel();
    }

    function drawMario() {
        ctx.save();
        ctx.translate(player.x + player.w / 2, player.y);
        ctx.scale(player.dir, 1);
        ctx.translate(-player.w / 2, 0);

        // Hat
        ctx.fillStyle = '#c00';
        ctx.fillRect(6, 0, 20, 6);

        // Face
        ctx.fillStyle = '#ffccaa';
        ctx.fillRect(8, 6, 16, 16);
        ctx.fillStyle = '#000';
        ctx.fillRect(12, 12, 2, 2); // eye
        ctx.fillRect(18, 12, 2, 2);
        ctx.fillRect(15, 18, 2, 1); // mouth

        // Body
        ctx.fillStyle = '#0000cc';
        ctx.fillRect(8, 22, 16, 16);

        // Legs
        ctx.fillStyle = '#663300';
        ctx.fillRect(8, 38, 6, 10);
        ctx.fillRect(18, 38, 6, 10);

        ctx.restore();
    }

    function drawUI() {
        ctx.fillStyle = 'rgba(0,0,0,0.5)';
        ctx.fillRect(260, 10, 280, 36);
        ctx.strokeStyle = '#fff';
        slots.forEach((s, i) => {
            ctx.strokeRect(270 + i * 32, 16, 28, 24);
            if (s) {
                ctx.fillStyle = '#fff';
                ctx.fillText(s, 279 + i * 32, 34);
            }
        });
    }

    function draw() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        ctx.fillStyle = '#654321';
        platforms.forEach(p => ctx.fillRect(p.x, p.y, p.w, p.h));

        ctx.fillStyle = 'yellow';
        ctx.font = '20px Arial';
        letters.forEach(l => !l.collected && ctx.fillText(l.char, l.x, l.y));

        drawMario();
        drawUI();
    }

    function loop() {
        update();
        draw();
        requestAnimationFrame(loop);
    }

    loop();
</script>
</body>
</html>
